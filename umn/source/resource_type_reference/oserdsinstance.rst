:original_name: rts_02_0089.html

.. _rts_02_0089:

OSE::RDS::Instance
==================

A resource for creating a relational database (Relational Database Service) instances.

A relational database service is a reliable, scalable, and easy-to-manage web service in the cloud.

Required Properties
-------------------

+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Name                              | Description                                                                                                                                                                                                                                                               |
+===================================+===========================================================================================================================================================================================================================================================================+
| name                              | Instance name                                                                                                                                                                                                                                                             |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | String value expected.                                                                                                                                                                                                                                                    |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Updates cause replacement.                                                                                                                                                                                                                                                |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | The instance name of the same type instances under the same tenant must be unique.                                                                                                                                                                                        |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Value range: The value is a string of 4 to 64 characters, case insensitive, which must start with a letter. An instance name can contain letters, digits, hyphens (-), or underscores (_). Other special characters cannot be included.                                   |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| datastore_type                    | Database engine                                                                                                                                                                                                                                                           |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | String value expected.                                                                                                                                                                                                                                                    |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Updates cause replacement.                                                                                                                                                                                                                                                |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Allowed value: MySQL, PostgreSQL, or SQLServer                                                                                                                                                                                                                            |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| datastore_version                 | Instance version                                                                                                                                                                                                                                                          |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | String value expected.                                                                                                                                                                                                                                                    |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Updates cause replacement.                                                                                                                                                                                                                                                |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Value range: The value contains a maximum of 64 characters and cannot be fewer than four characters.                                                                                                                                                                      |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| flavor                            | Flavor ID                                                                                                                                                                                                                                                                 |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | String value expected.                                                                                                                                                                                                                                                    |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Can be updated without replacement.                                                                                                                                                                                                                                       |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Value range: The value cannot be empty. The length of the character string is verified and the regular UUID regular check is performed.                                                                                                                                   |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | .. note::                                                                                                                                                                                                                                                                 |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   |    For details, see :ref:`How to Obtain the flavor Value of Resource OSE::RDS::Instance? <rts_faq_0004>`.                                                                                                                                                                 |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| volume                            | Disk information                                                                                                                                                                                                                                                          |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Map value expected.                                                                                                                                                                                                                                                       |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Map properties:                                                                                                                                                                                                                                                           |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | -  type                                                                                                                                                                                                                                                                   |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   |    Disk type                                                                                                                                                                                                                                                              |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   |    String value expected.                                                                                                                                                                                                                                                 |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   |    Updates cause replacement.                                                                                                                                                                                                                                             |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   |    Allowed value: Common (SATA) and ULTRAHIGH (SSD), which are case sensitive.                                                                                                                                                                                            |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | -  size                                                                                                                                                                                                                                                                   |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   |    Disk size                                                                                                                                                                                                                                                              |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   |    Integer value expected.                                                                                                                                                                                                                                                |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   |    Unit: GB                                                                                                                                                                                                                                                               |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   |    Can be updated without replacement.                                                                                                                                                                                                                                    |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   |    Value range: The value ranges from 100 to 2000 and must be an integer multiple of 10.                                                                                                                                                                                  |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| region                            | Area ID                                                                                                                                                                                                                                                                   |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | String value expected.                                                                                                                                                                                                                                                    |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Updates cause replacement.                                                                                                                                                                                                                                                |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Value range: The value cannot be empty.                                                                                                                                                                                                                                   |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| availability_zone                 | ID of an available zone                                                                                                                                                                                                                                                   |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | String value expected.                                                                                                                                                                                                                                                    |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Updates cause replacement.                                                                                                                                                                                                                                                |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Value range: The value cannot be empty.                                                                                                                                                                                                                                   |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| nics                              | Subnet information                                                                                                                                                                                                                                                        |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Map value expected.                                                                                                                                                                                                                                                       |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Map properties:                                                                                                                                                                                                                                                           |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | -  subnet                                                                                                                                                                                                                                                                 |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   |    Subnet ID                                                                                                                                                                                                                                                              |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   |    String value expected.                                                                                                                                                                                                                                                 |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   |    Updates cause replacement.                                                                                                                                                                                                                                             |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   |    Value range: The value cannot be empty. The length of the character string must be verified through the regular UUID check.                                                                                                                                            |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| vpc                               | ID of a VPC                                                                                                                                                                                                                                                               |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | String value expected.                                                                                                                                                                                                                                                    |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Updates cause replacement.                                                                                                                                                                                                                                                |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Value range: The value cannot be empty. The length of the character string must be verified through the regular UUID check.                                                                                                                                               |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| security_group                    | Security group to which an instance belongs                                                                                                                                                                                                                               |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | String value expected.                                                                                                                                                                                                                                                    |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Updates cause replacement.                                                                                                                                                                                                                                                |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Value range: The value cannot be empty. The length of the character string must be verified through the regular UUID check.                                                                                                                                               |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| password                          | Password of the database **root** user                                                                                                                                                                                                                                    |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | String value expected.                                                                                                                                                                                                                                                    |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Updates cause replacement.                                                                                                                                                                                                                                                |
|                                   |                                                                                                                                                                                                                                                                           |
|                                   | Value range: The value is a string of 8 to 32 characters consisting of uppercase letters, lowercase letters, digits, and special characters ``~!@#%^*-_=+?.`` The password must contain uppercase letters, lowercase letters, digits, and at least one special character. |
+-----------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Optional Properties
-------------------

+-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
| Name                              | Description                                                                                                                       |
+===================================+===================================================================================================================================+
| db_port                           | Port number of the database                                                                                                       |
|                                   |                                                                                                                                   |
|                                   | Integer value expected.                                                                                                           |
|                                   |                                                                                                                                   |
|                                   | The default value is **8036**.                                                                                                    |
|                                   |                                                                                                                                   |
|                                   | Cannot be updated.                                                                                                                |
+-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
| backup_strategy                   | Advanced backup policy                                                                                                            |
|                                   |                                                                                                                                   |
|                                   | Map value expected.                                                                                                               |
|                                   |                                                                                                                                   |
|                                   | Map properties:                                                                                                                   |
|                                   |                                                                                                                                   |
|                                   | -  start_time                                                                                                                     |
|                                   |                                                                                                                                   |
|                                   |    Start time: Automatic backup will be triggered within one hour of the start time.                                              |
|                                   |                                                                                                                                   |
|                                   |    String value expected.                                                                                                         |
|                                   |                                                                                                                                   |
|                                   |    Updates cause replacement.                                                                                                     |
|                                   |                                                                                                                                   |
|                                   |    Value range: The value cannot be empty. The value must be in hh:mm:ss format and valid. The current time is the UTC time.      |
|                                   |                                                                                                                                   |
|                                   | -  days                                                                                                                           |
|                                   |                                                                                                                                   |
|                                   |    The number of days for which backup files can be saved.                                                                        |
|                                   |                                                                                                                                   |
|                                   |    Integer value expected.                                                                                                        |
|                                   |                                                                                                                                   |
|                                   |    Updates cause replacement.                                                                                                     |
|                                   |                                                                                                                                   |
|                                   |    Value range: 0 to 35. When this parameter is set to the default value or **0**, the automatic backup policy is not configured. |
+-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
| ha                                | HA configuration parameter, which is used for creating an HA instance.                                                            |
|                                   |                                                                                                                                   |
|                                   | Map value expected.                                                                                                               |
|                                   |                                                                                                                                   |
|                                   | Map properties:                                                                                                                   |
|                                   |                                                                                                                                   |
|                                   | -  enable                                                                                                                         |
|                                   |                                                                                                                                   |
|                                   |    HA configuration parameters                                                                                                    |
|                                   |                                                                                                                                   |
|                                   |    Boolean value expected.                                                                                                        |
|                                   |                                                                                                                                   |
|                                   |    Updates cause replacement.                                                                                                     |
|                                   |                                                                                                                                   |
|                                   | -  replication_mode                                                                                                               |
|                                   |                                                                                                                                   |
|                                   |    Synchronization parameter of the standby node                                                                                  |
|                                   |                                                                                                                                   |
|                                   |    String value expected.                                                                                                         |
|                                   |                                                                                                                                   |
|                                   |    Updates cause replacement.                                                                                                     |
|                                   |                                                                                                                                   |
|                                   |    Value range: The value cannot be empty.                                                                                        |
|                                   |                                                                                                                                   |
|                                   |    -  MySQL : The value can be **async** or **semisync**.                                                                         |
|                                   |    -  PostgreSQL: The value can be **async** or **sync**.                                                                         |
|                                   |                                                                                                                                   |
|                                   | .. important::                                                                                                                    |
|                                   |                                                                                                                                   |
|                                   |    NOTICE:                                                                                                                        |
|                                   |    Microsoft SQL Server does not support the creation of HA instances. Therefore, this parameter is not involved.                 |
+-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+
| replica_of                        | Read-only copy configuration parameter (mandatory when a read-only copy is created).                                              |
|                                   |                                                                                                                                   |
|                                   | String value expected.                                                                                                            |
|                                   |                                                                                                                                   |
|                                   | Cannot be updated.                                                                                                                |
|                                   |                                                                                                                                   |
|                                   | Value range: instance ID of the primary instance                                                                                  |
+-----------------------------------+-----------------------------------------------------------------------------------------------------------------------------------+

Attributes
----------

+----------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| Name           | Description                                                                                                                                  |
+================+==============================================================================================================================================+
| name           | Database instance name                                                                                                                       |
+----------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| flavor         | Specification information                                                                                                                    |
+----------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| hostname       | Connection address of an instance. The value exists only after an ECS is created successfully. In other cases, the value is an empty string. |
+----------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| type           | Instance type. The value can be **master**, **slave**, or **readreplica**.                                                                   |
+----------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| backupStrategy | Advanced backup policy                                                                                                                       |
+----------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| slaveId        | ID of the secondary instance.                                                                                                                |
+----------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| ha             | HA information. This parameter is returned when the HA instance is obtained.                                                                 |
+----------------+----------------------------------------------------------------------------------------------------------------------------------------------+
| replicaOf      | This parameter is returned only when a read-only copy is obtained.                                                                           |
+----------------+----------------------------------------------------------------------------------------------------------------------------------------------+

HOT Syntax
----------

.. code-block::

   heat_template_version: 2014-10-16
   ...
   resources:
     the_resource:
       type: OSE::RDS::Instance
       properties:
         name: String
         region: String
         availability_zone: String
         nics:
           subnet: String
         volume:
           type: String
           size: Number
         security_group: String
         vpc: String
         datastore_type: String
         datastore_version: String
         flavor: String
         password: String
